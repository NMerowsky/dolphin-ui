<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quick Start Guide &mdash; dolphin-tools 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="dolphin-tools 1.0.0 documentation" href="index.html" />
    <link rel="prev" title="Welcome to dolphin-tools’s documentation!" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quick-start-guide">
<h1>Quick Start Guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this headline">¶</a></h1>
<p>dolphin-tools</p>
<p>This guide will walk you through creating new pipelines in dolphin step by step.</p>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>dolphin-tools need to be located in the processing units. It can be either a HPC system or a standalone machine. All required tools need to be installed in these systems.
First we are going to create a simple test pipeline. To be able to create a test pipeline and run it in the cluster we need a workflow file.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Please check quick start guide for Docker or for HPC please use installation guide for the appropriate cluster section.</p>
</div>
<div class="section" id="workflow-file">
<h2>Workflow file<a class="headerlink" href="#workflow-file" title="Permalink to this headline">¶</a></h2>
<p>Workflow file is a text file and includes the directives about the workflow you want to create. This workflow file can reside either in your client machine or in your cluster.
runWorkflow.py script uses this workflow file to run the steps in your target processing units. runWorkflow script is basically a client script to connect a web-api to run the scripts in a distributed environment.
In addition to this, this script runs in the client system until all workflow ends succcessfully. This workflow file consists of three columns. First column is a name for the step. Second column the command you want to run in your remote machine  and the last column is the time interval that the client checks the run status.
If the run finished sucessfully or killed in the cluster or your host machine, the client senses this and continue or exit accordingly.
There are examples in tests/pipeline folder.</p>
<ul class="simple">
<li>Ex:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>
</pre></div>
</div>
<p>w1.txt</p>
<p>step1   ls -l   1
step2   echo 1  1
step3   ls      1</p>
<p>Here we are going to run three steps in the cluster and runWorkflow script will check the steps in every second, if they finished sucessfully or not.</p>
</div>
<div class="section" id="running-a-workflow">
<h2>Running a workflow<a class="headerlink" href="#running-a-workflow" title="Permalink to this headline">¶</a></h2>
<p>To run a workflow runWorkflow.py file need to be called with the parameters below.</p>
<ul class="simple">
<li>Usage: runWorkflow.py [options]</li>
</ul>
<dl class="docutils">
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></td>
<td>show this help message and exit</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-i <var>INPUTPARAM</var></span>, <span class="option">--inputparam=<var>INPUTPARAM</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>input parameters for the workflow</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-p <var>DEFAULTPARAM</var></span>, <span class="option">--defaultparam=<var>DEFAULTPARAM</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>defined parameter file that will be run on cluster</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-u <var>USERNAME</var></span>, <span class="option">--username=<var>USERNAME</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>defined user in the cluster</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-k <var>WKEY</var></span>, <span class="option">--wkey=<var>WKEY</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>defined key for the workflow</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-w <var>WORKFLOWFILE</var></span>, <span class="option">--workflowfile=<var>WORKFLOWFILE</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>workflow filename</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d <var>DBHOST</var></span>, <span class="option">--dbhost=<var>DBHOST</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>dbhost name</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-o <var>OUTDIR</var></span>, <span class="option">--outdir=<var>OUTDIR</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>output directory in the cluster</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-f <var>CONFIG</var></span>, <span class="option">--config=<var>CONFIG</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>configuration parameter section</td></tr>
</tbody>
</table>
</dd>
</dl>
<p>please chose your -f option according to your installation. If you are running this on Docker and made your definitions right on your Docker section right. The command should be something like below;</p>
<div class="highlight-bash"><div class="highlight"><pre>
</pre></div>
</div>
<p>python path/to/installation_dir/src/runWorkflow.py -f Docker -w path/to/w1.txt -o /export/TEST2</p>
</div>
<div class="section" id="standart-output-of-a-run-in-docker">
<h2>Standart output of a run in Docker<a class="headerlink" href="#standart-output-of-a-run-in-docker" title="Permalink to this headline">¶</a></h2>
<p>If everything is successfull you need to see an output something like below;</p>
<div class="highlight-bash"><div class="highlight"><pre>
</pre></div>
</div>
<p>Docker
<a class="reference external" href="http://localhost/dolphin/api/service.php">http://localhost/dolphin/api/service.php</a>
localhost
/export/tmp/logs
WORKFLOW STARTED:hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS</p>
<p>step1:hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS:ls -l
&#8220;RUNNING(2):python /usr/local/share/dolphin_tools/src/runService.py -f Localhost -d localhost   -o /export/TEST -u kucukura -k hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS -c &#8220;ls -l&#8221; -n step1 -s step1 2&gt;&amp;1&#8221;
RUNNING(2):python /usr/local/share/dolphin_tools/src/runService.py -f Localhost -d localhost   -o /export/TEST -u kucukura -k hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS -c &#8220;ls -l&#8221; -n step1 -s step1 2&gt;&amp;1</p>
<p>step1:hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS:ls -l
&#8220;Service ended successfully!!!&#8221;
Service ended successfully!!!</p>
<p>step2:hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS:echo 1
&#8220;RUNNING(2):python /usr/local/share/dolphin_tools/src/runService.py -f Localhost -d localhost   -o /export/TEST -u kucukura -k hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS -c &#8220;echo 1&#8221; -n step2 -s step2 2&gt;&amp;1&#8221;
RUNNING(2):python /usr/local/share/dolphin_tools/src/runService.py -f Localhost -d localhost   -o /export/TEST -u kucukura -k hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS -c &#8220;echo 1&#8221; -n step2 -s step2 2&gt;&amp;1</p>
<p>step2:hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS:echo 1
&#8220;Service ended successfully!!!&#8221;
Service ended successfully!!!</p>
<p>step3:hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS:ls
&#8220;RUNNING(2):python /usr/local/share/dolphin_tools/src/runService.py -f Localhost -d localhost   -o /export/TEST -u kucukura -k hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS -c &#8220;ls&#8221; -n step3 -s step3 2&gt;&amp;1&#8221;
RUNNING(2):python /usr/local/share/dolphin_tools/src/runService.py -f Localhost -d localhost   -o /export/TEST -u kucukura -k hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS -c &#8220;ls&#8221; -n step3 -s step3 2&gt;&amp;1</p>
<p>step3:hiB4l9c3DZNw7YS4ZzjAdmxyyXPzHS:ls
&#8220;Service ended successfully!!!&#8221;
Service ended successfully!!!</p>
<p>All the services Ended</p>
</div>
<div class="section" id="the-directory-structure-of-an-example-run">
<h2>The directory structure of an example run:<a class="headerlink" href="#the-directory-structure-of-an-example-run" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>For each step you want to run will be a script under OUTDIR/scripts directory.</li>
<li>The standard output will be logged under tmp/lsf folder with its PID.std.</li>
</ul>
<p>There are other log files are about communication with mySQL and LSF logs if you are running them in LSF cluster
* Intermediate submission scripts are in tmp/src folder
* If there are other jobs submitted in the steps, they are going to be tracked under track folder to be able to resumed the jobs. But in this test, there is no such jobs.</p>
<div class="highlight-bash"><div class="highlight"><pre>
</pre></div>
</div>
<p>/export/TEST
<a href="#id1"><span class="problematic" id="id2">|</span></a>&#8211; scripts
|   <a href="#id3"><span class="problematic" id="id4">|</span></a>&#8211; step1.bash
|   <a href="#id5"><span class="problematic" id="id6">|</span></a>&#8211; step2.bash
|   <a href="#id7"><span class="problematic" id="id8">`</span></a>&#8211; step3.bash
<a href="#id9"><span class="problematic" id="id10">`</span></a>&#8211; tmp</p>
<blockquote>
<div><a href="#id11"><span class="problematic" id="id12">|</span></a>&#8211; lsf
|   <a href="#id13"><span class="problematic" id="id14">|</span></a>&#8211; 862.jobStatus.log
|   <a href="#id15"><span class="problematic" id="id16">|</span></a>&#8211; 862.std
|   <a href="#id17"><span class="problematic" id="id18">|</span></a>&#8211; 895.jobStatus.log
|   <a href="#id19"><span class="problematic" id="id20">|</span></a>&#8211; 895.std
|   <a href="#id21"><span class="problematic" id="id22">|</span></a>&#8211; 927.jobStatus.log
|   <a href="#id23"><span class="problematic" id="id24">`</span></a>&#8211; 927.std
<a href="#id25"><span class="problematic" id="id26">|</span></a>&#8211; src
|   <a href="#id27"><span class="problematic" id="id28">|</span></a>&#8211; step1.submit.bash
|   <a href="#id29"><span class="problematic" id="id30">|</span></a>&#8211; step1.tmp.bash
|   <a href="#id31"><span class="problematic" id="id32">|</span></a>&#8211; step2.submit.bash
|   <a href="#id33"><span class="problematic" id="id34">|</span></a>&#8211; step2.tmp.bash
|   <a href="#id35"><span class="problematic" id="id36">|</span></a>&#8211; step3.submit.bash
|   <a href="#id37"><span class="problematic" id="id38">`</span></a>&#8211; step3.tmp.bash
<a href="#id39"><span class="problematic" id="id40">`</span></a>&#8211; track</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Quick Start Guide</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#workflow-file">Workflow file</a></li>
<li><a class="reference internal" href="#running-a-workflow">Running a workflow</a></li>
<li><a class="reference internal" href="#standart-output-of-a-run-in-docker">Standart output of a run in Docker</a></li>
<li><a class="reference internal" href="#the-directory-structure-of-an-example-run">The directory structure of an example run:</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to dolphin-tools&#8217;s documentation!</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickstart.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Alper Kucukural, Nick Merowsky.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/quickstart.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>